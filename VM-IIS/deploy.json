{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "storageAccountType": {
      "type": "string",
      "defaultValue": "Standard_LRS",
      "allowedValues": [
        "Standard_LRS"
      ],
      "metadata": {
        "description": "Type of redundancy for your storage account"
      }
    },
    "storageAccountName":{
        "type":"string",
        "defaultValue":"Storage"
    },
    "location":{
        "type":"string",
        "defaultValue":"[resourceGroup().location]"
    },
    "fileShareName": {
            "type": "string",
            "minLength": 3,
            "maxLength": 63,
            "metadata": {
                "description": "Specifies the name of the File Share. File share names must be between 3 and 63 characters in length and use numbers, lower-case letters and dash (-) only."
            }
    },
    "containerName": {
            "type": "string",
            "metadata": {
                "description": "Specifies the name of the blob container."
            }
    }
    
  },

  "variables": {
    "vnetName": "myVNet",
    "addressPrefix": "10.0.0.0/24",
    "subnetName": "Subnet-1",
    "subnetPrefix": "10.0.0.0/24"
    
  },


  "resources": [
    {
      "name": "[parameters('storageAccountName')]",
        "type": "Microsoft.Storage/storageAccounts",
        "location": "[parameters('location')]",
        "apiVersion":"2019-04-01",
        "sku": {
            "name": "[parameters('storageAccountType')]"
        },
        "kind": "Storage"
        },
    {
        "name": "[concat(parameters('storageAccountName'), '/default/', parameters('fileShareName'))]",
            "type": "Microsoft.Storage/storageAccounts/fileServices/shares",
            "apiVersion":"2019-04-01",
            "dependsOn": [
                    "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccountName'))]"
                ]
    },
      {
         "name": "[concat('default/', parameters('containerName'))]",
            "type": "blobServices/containers",
            "apiVersion":"2019-04-01",
             "dependsOn": [
                 "[parameters('storageAccountName')]"
                 ]
    },

     {
      "type": "Microsoft.Network/virtualNetworks",
        "name": "[variables('vnetName')]",
        "location": "[parameters('location')]",
        "apiVersion":"2019-04-01",
        "properties": {
            "addressSpace": {
            "addressPrefixes": [
                "[variables('addressPrefix')]"
            ]
            },
            "subnets": [
            {
                "name": "[variables('subnetName')]",
                "properties": {
                "addressPrefix": "[variables('subnetPrefix')]"
                }
            }
            ]
      }
    }


  ],


  "outputs": {}
}
